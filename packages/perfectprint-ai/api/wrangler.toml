#:schema node_modules/wrangler/config-schema.json
name = "perfectprint-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# R2 Storage for uploaded files
[[r2_buckets]]
binding = "PERFECTPRINT_STORAGE"
bucket_name = "perfectprint-files"
preview_bucket_name = "perfectprint-files-preview"

# D1 Database for job tracking
[[d1_databases]]
binding = "DB"
database_name = "perfectprint-db"
database_id = "TO_BE_CREATED"

# Environment variables
[vars]
PROCESSOR_URL = "http://localhost:8000"  # Python processor URL
MAX_FILE_SIZE = "10485760"  # 10MB in bytes
ALLOWED_FILE_TYPES = "image/png,image/jpeg,image/jpg,image/webp"

# Development settings
[dev]
port = 8787

